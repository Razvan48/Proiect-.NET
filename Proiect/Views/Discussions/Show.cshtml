@model Proiect.Models.Discussion

@{
    ViewData["Title"] = "Discussions Show";
}

@* Afisarea mesajului de validare *@
@if (ViewBag.Message != null)
{
    <h2 class="@ViewBag.Alert p-3 rounded-3 text-center mb-5">@ViewBag.Message</h2>
}

@* Afisare intreabre *@
<h2>@Model.Title</h2>

@* TODO: schimba fontul *@
<div class="d-flex">
    <div class="d-flex" style="margin-right: 50px;">
        <span>Asked</span>
        <div>: @Model.Date</div>
    </div>
    <div class="d-flex" style="margin-right: 50px;">
        <span>Modified</span>
        <div>: ultima data cand a fost editata intrebarea</div>
    </div>
    <div class="d-flex">
        <span>Viewed</span>
        <div>: nr_vizionari</div>
    </div>
</div>

<hr style="height: 1px; background-color: #e7700d; opacity: 0.75;" />

<div class="container">
    <div class="row">
        <div class="col-md-1 d-flex justify-content-center">
            @* TODO: schimba fontul + dimensiunea *@
            <div class="d-inline-flex flex-column">
                <button type="button" class="btn btn-outline-success"><i class="bi bi-arrow-up-square h2"></i></button>
                <div style="margin-top: 10px; margin-bottom: 10px;">nr_voturi</div>
                <button type="button" class="btn btn-outline-danger"><i class="bi bi-arrow-down-circle h2"></i></button>
            </div>
        </div>
        <div class="col">
            @* TODO: schimba fontul *@
            <div>
                <h3>@Model.Content</h3>

                <a class="btn btn-outline-primary" href="/Discussions/Edit?Id=@Model.Id&categoryId=@Model.CategoryId"><i class="bi bi-pencil-square"></i>Edit Discussion</a>
                <div>
                    <form method="post" action="/Discussions/Delete/@Model.Id">
                        <button class="btn btn-outline-danger" type="submit"><i class="bi bi-trash"></i>Delete Discussion</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>


@*Mai jos vor fi comentariile discutiei + butoane de adaugat/sters/editat comentariile*@

@* TODO: sterge la sfarsit din <br /> *@
<br />
<br />
<br />

<div class="d-flex justify-content-between">
    <div>Raspunsuri: nr_raspunsuri_primite</div>
    <div>Sortare: criterii_sortare</div>
</div>
<div>Pagini cu raspunsuri</div>

@* TODO: sterge la sfarsit din <br /> *@
<br />
<br />
<br />

@* Afisare comentarii impreuna cu butoanele de editare si stergere *@
@foreach (var answer in Model.Answers)
{
    <div class="container">
        <div class="row">
            <div class="col-md-1 d-flex justify-content-center">
                @* TODO: schimba fontul + dimensiunea *@
                <div class="d-inline-flex flex-column">
                    <button type="button" class="btn btn-outline-success"><i class="bi bi-arrow-up-square h2"></i></button>
                    <div style="margin-top: 10px; margin-bottom: 10px;">nr_voturi</div>
                    <button type="button" class="btn btn-outline-danger"><i class="bi bi-arrow-down-circle h2"></i></button>
                </div>
            </div>

            <div class="col">
                <p>@answer.Content</p>
                <div class="d-flex justify-content-between">
                    <strong><i class="bi bi-person"></i>@answer.User.UserName</strong>
                    <small>@answer.Date</small>
                </div>
                <br>

                @* TODO: adauga butoanele de edit+stergere in functie de rolul utilizatorului *@

                @* Afiseaza comentariile la un raspuns *@
                @foreach (var comment in answer.Comments)
                {
                    <hr style="margin-bottom: 5px; margin-top: 5px;" />
                    <small>@comment.Content</small>
                    <small> - </small>
                    <small><i class="bi bi-person"></i>@comment.User.UserName</small>
                    <small>@comment.Date</small>
                    @* TODO: adauga butoane de sters + editat *@
                }

                @* Afisarea formularului in care se poate adauga un comentariu nou *@
                <hr style="margin-bottom: 5px; margin-top: 5px;" />
                <form method="post" action="/Discussions/ShowComment/@answer.Id">
                    <input type="hidden" name="AnswerId" value="@answer.Id" />

                    <div class="d-flex">
                        <textarea class="form-control" name="Content" rows="1" placeholder="Adauga comentariul tau..." style="border: none;"></textarea>
                        @Html.ValidationMessage("Content", null, new { @class = "text-danger" })

                        <div>
                            <button class="btn btn-success" type="submit">Posteaza</button>
                        </div>
                    </div>

                    @Html.ValidationSummary(false, "", new { @class = "text-danger" })
                </form>
                <hr style="margin-bottom: 5px; margin-top: -10px;" />
            </div>
        </div>
    </div>
    <hr style="margin-bottom: 50px; margin-top: 50px; height: 5px; background-color: #e7700d; opacity: 0.75;" />
}

@* Afisarea formularului in care se poate adauga un raspuns nou *@
<div class="container">
    <h4>Adauga raspunsul tau</h4>
    <form method="post" action="/Discussions/ShowAnswer/@Model.Id">
        <input type="hidden" name="DiscussionId" value="@Model.Id" />

        <textarea class="form-control" name="Content"></textarea>
        @Html.ValidationMessage("Content", null, new { @class = "text-danger" })
        <br />

        <button class="btn btn-success" type="submit">Posteaza raspunsul tau</button>

        @Html.ValidationSummary(false, "", new { @class = "text-danger" })
        <br />
    </form>
</div>


@* TODO: Related questions *@

